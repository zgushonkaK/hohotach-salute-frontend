# hohotach-salute-frontend

## Создание проекта "SmartApp Code":

1. Идём на страницу SmartMarket Studio ([ссылка](https://developers.sber.ru/studio/));
2. В меню слева нажимаем "Создать проект";
3. Выбираем "+ Создать проект" в левом меню или "Все инструменты" в верхней части страницы -> раздел "Мини-приложения Салют" -> **Code for SmartApp** (не спутайте с "Code for SaluteBot" - это **другой** тип приложений)

   1. Выбираем "Пустой проект" -> Далее;
   2. "Внешний репозиторий" не подключаем (хотя позже для своего приложения можете подключить) -> Пропустить
   3. Указываем "Название проекта", например, зададим название "Список задач"; активируем "Добавить группу";
   4. Нажимаем "Создать проект";
4. В открывшемся проекте, в левом меню выбираем нижний пункт "Настройки проекта", потом переходим на закладку "Экспорт/Импорт", нажимаем на "Прикрепите файл";
5. Добавляем заархивированную папку `scenario` из корня репозитория (в zip формате)
6. В левом меню выбираем "Редактор" -> "Сценарии";
7. Нажимаем "Собрать";
8. В левом меню выбираем "Публикации";
9. Нажимаем "Получить вебхук" (выводится сообщение "URL хука для Сбера NLP 2.2 скопирован в буфер обмена").

## Создание проекта "CanvasApp":

1. Идём на страницу SmartApp Studio ([ссылка](https://developers.sber.ru/studio/);
2. Выбираем "+ Создать проект" в левом меню или "Все инструменты" в верхней части страницы -> раздел "Мини-приложения Салют" ;
3. Выбираем раздел "Мини-приложения Салют" -> **CanvasApp**
4. Указываем "Название смартапа" - лучше то же, что указывали в предыдущем разделе при создании приложения SmartApp Code (в общем случае они могут отличаться) - например, "Список задач";
5. У себя на диске в каталоге проекта копируем файл-пример `.env.sample` в файл `.env`. В файле `.env` указываем название CanvasApp, заданное в предыдущем пункте, в строке `REACT_APP_SMARTAPP`); Обратите, пожалуйста, внимание на этот пункт - из-за него часто возникают трудно выявляемые проблемы;
6. Продолжаем создавать приложение в SmartApp Studio, в "Группа проекта" указываем ту же группу, которую создали в предыдущем разделе при создании приложения SmartApp Code, обычно она совпадает с названием приложения SmartApp Code (в общем случае это необязательно);
7. Нажимаем "Создать проект".
8. В левом меню выбираем шестеренку ("Параметры"); находим раздел "Сценарий смартаппа", выбираем Тип сценария "SmartApp Code API" и в поле "Внешняя ссылка" указываем URL на "Webhook" (полученный в "SmartApp Code");
9. Указываем URL на "Frontend Endpoint" (url страницы, где будет размещаться клиентская часть вашего приложения. **Для первого запуска, локального тестирования на своем компьютере не используется, можете указать любой)**;
10. Нажимаем "Сохранить" во всплывающей панели внизу.

## Генерация token:

Если у вас приложение уже запущено, при внесении изменений в файл `.env` , в данном случае - изменении токена требуется **перезапуск** (в командной строке, где запущено приложение: Ctrl+c, стрелка вверх, Enter).

1. Идём на страницу SmartApp Studio ([ссылка](https://developers.sber.ru/studio/));
2. В меню профиля (правый верхний угол) выбираем "Настройки профиля";
3. В меню слева - "Настройки сервисов"
4. На открывшейся странице - "SmartApp - Информация для каталога, эмулятор, мои устройства"
5. Закладка "Эмулятор";
6. Нажимаем "Обновить ключ";
7. Нажимаем "Скопировать ключ" (Появляется надпись "Выполнено. Ключ скопирован");
8. Указываем токен в файле `.env`, в строке `REACT_APP_TOKEN`.

## Запуск проекта:

1. Установить нужную версию Nodejs можно либо непосредственно с сайта, либо (рекомендуется) с помощью утилиты `nvm`, позволяющей быстро переключаться между версиями Node из командной строки (`nvm install 18.15.0`, `nvm use 18.15.0`).

2. Запустить с помощью `npm`

```bash
npm install
npm start
```

## Возможные проблемы:

1. Если ассистент выдает ошибки сети, нужно установить Российские сертификаты в браузер/на систему.